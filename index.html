<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=0.9">
  <link rel="stylesheet" href="style.css">
  <title>BootSys</title>
</head>
<body>
  <!-- 左：メニュー -->
  <div class="menu">
    <div class="menu-header">
      <input type="text" placeholder="プロジェクト名..." id="PNameBox" autocomplete="off" spellcheck="off"/>
    </div>
    <div class="menu-items" id="menuItemsContainer">
      <!-- <button>ダッシュボード</button>
      <button>リソース</button>
      <button>ワーク</button>
      <button>設定</button> -->
    </div>
  </div>

    <!-- 独立：ログ -->
    <div class="log-area">
        <label for="appLog" style="cursor: pointer;" onclick="toggleLogsVisible()">ログ</label>
        <textarea id="appLog" class="log-textarea" readonly hidden></textarea>
    </div>

  <!-- 右：ワーク -->
  <div class="work">
    <div class="tabs" id="tabContainer">
      <!-- <button class="active">タブ1</button>
      <button>タブ2</button>
      <button>タブ3</button> -->
    </div>
    <div class="tab-content">
      <!-- <div id="tab1" class="tab-panel active">
        <h2>タブ1の内容</h2>
        <p>ここにタブ1のコンテンツが表示されます。</p>
      </div>
      <div id="tab2" class="tab-panel">
        <h2>タブ2の内容</h2>
        <p>ここにタブ2のコンテンツが表示されます。</p>
      </div>
      <div id="tab3" class="tab-panel">
        <h2>タブ3の内容</h2>
        <p>ここにタブ3のコンテンツが表示されます。</p>
      </div> -->

        <!-- プログラム階層 start--------------------------------------------------------------------------------------------------------------->
        <div id="MASTER_PGCATEGORY_PANEL" class="tab-panel">
            <h2 class="page-title">プログラム階層</h2>

            <!-- 階層数 -->
            <div class="form-section like-card-white">
                <label for="level-count">階層数</label>
                <input type="number" id="level-count" min="0" max="5" value="2" class="small-input">
            </div>

            <!-- 階層名入力 -->
            <div class="form-section like-card-white" id="kaiso-register-formWrpper">
                <label>階層登録</label>
                <div class="level-inputs" id="kaiso-register-form">


                    <!-- <div class="level-row">
                        <input type="text" placeholder="階層1 名称" class="medium-input">
                        <button class="mini-btn">登録</button>
                    </div>

                    <div class="level-row">
                        <select class="medium-input">
                            <option value="1">（階層1選択）</option>
                            <option value="2">会計業務</option>
                            <option value="3">経費管理</option>
                        </select>
                        <input type="text" placeholder="階層2 名称" class="medium-input">
                        <button class="mini-btn">登録</button>
                    </div>

                    <div class="level-row">
                        <select class="medium-input">
                            <option value="1">（階層1選択）</option>
                            <option value="2">会計業務</option>
                            <option value="3">経費管理</option>
                        </select>
                        <select class="medium-input">
                            <option value="1">（階層2選択）</option>
                            <option value="2">決済業務</option>
                            <option value="3">管理帳票</option>
                        </select>
                        <input type="text" placeholder="階層3 名称" class="medium-input">
                        <button class="mini-btn">登録</button>
                    </div> -->

                    
                </div>
            </div>

            <div class="like-card-white"  id="kaiso-table-formWrpper">
                <!-- 階層選択ドロップダウン -->
                <div class="form-section">
                    <label>階層照会</label>
                    <select class="medium-input">
                    <option value="1">階層1</option>
                    <option value="2">階層2</option>
                    <option value="3">階層3</option>
                    </select>
                </div>

                <!-- 照会・編集テーブル -->
                <div class="pg-category-table-wrapper"  id="kaiso-table-form">
                    <table class="pg-category-table">
                        <thead>
                            <tr>
                                <th style="width: 10%">No</th>
                                <th style="width: 80%">階層名称</th>
                                <th style="width: 10%">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="text" value="1"></td>
                                <td><input type="text" value="支出予算"></td>
                                <td>
                                    <!-- <button class="medium-button-green">停止</button> -->
                                    <button class="medium-button-red" style="width:100%">削除</button>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="text" value="2"></td>
                                <td><input type="text" value="会計業務"></td>
                                <td>
                                    <!-- <button class="medium-button-green">停止</button> -->
                                    <button class="medium-button-red" style="width:100%">削除</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- プログラム情報 start--------------------------------------------------------------------------------------------------------------->
        <div id="MASTER_PGINFO_PANEL" class="tab-panel">
            <h2 class="page-title">プログラム情報</h2>
            <!-- 登録フォーム -->
            <div class="pg-info-form like-card-white">
                <h3 class="page-title">PG登録</h3>
                <div id="pg-info-kaiso-container">
                <!-- <div class="form-row" style="width: 30%;">
                    <label>階層1</label>
                    <select class="medium-input">
                        <option>選択してください</option>
                        <option>会計業務</option>
                        <option>経費管理</option>
                    </select>
                </div>
                <div class="form-row" style="width: 30%;">
                    <label>階層2</label>
                    <select class="medium-input">
                        <option>選択してください</option>
                        <option>決済業務</option>
                        <option>管理帳票</option>
                    </select>
                </div>
                <div class="form-row" style="width: 30%;">
                    <label>階層3</label>
                    <select class="medium-input">
                        <option>選択してください</option>
                    </select>
                </div> -->
                </div>
                <div class="form-row" style="width: 30%;">
                    <label>PG名称</label>
                    <input type="text" placeholder="プログラム名を入力" id="name-input-pginfo" autocomplete="off">
                </div>
                <div class="form-row" style="width: 30%;">
                    <label>PGID</label>
                    <input type="text" placeholder="PGIDを入力" id="id-input-pginfo" autocomplete="off">
                </div>
                <div class="form-row" style="width: 50%;">
                    <label>備考</label>
                    <input type="text" placeholder="備考を入力" id="remark-input-pginfo" autocomplete="off">
                    <button class="mini-btn" id="register-button-pginfo">登録</button>
                </div>
                <!-- <div class="form-row">
                    <button class="mini-btn">登録</button>
                </div> -->
            </div>

            <!-- 照会テーブル -->
            <div class="like-card-white">
                <h3 class="page-title">PG照会</h3>
                <div class="pg-info-table-wrapper">
                <table class="pg-info-table">
                    <thead>
                    <tr>
                        <th style="width:5%;">No</th>
                        <th style="width:15%;">階層1</th>
                        <th style="width:15%;">階層2</th>
                        <th style="width:15%;">階層3</th>
                        <th style="width:16%;">PG名称</th>
                        <th style="width:12%;">PGID</th>
                        <th style="width:17%;">備考</th>
                        <th style="width:5%;">操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>1</td>
                        <td>
                            <select class="medium-input">
                                <option>選択してください</option>
                                <option>会計業務</option>
                                <option>経費管理</option>
                            </select>
                        </td>
                        <td>
                            <select class="medium-input">
                                <option>選択してください</option>
                                <option>決済業務</option>
                                <option>管理帳票</option>
                            </select>
                        </td>
                        <td>
                            <select class="medium-input">
                                <option>選択してください</option>
                            </select>
                        </td>
                        <td><input type="text" value="仕訳入力"></td>
                        <td><input type="text" value="PG001"></td>
                        <td><input type="text" value="サンプル備考"></td>
                        <td><button class="medium-button-red" style="width:100%">削除</button></td>
                    </tr>
                    </tbody>
                </table>
                </div>
            </div>
        </div>

        <!-- 作業カテゴリ start --------------------------------------------------------------------------------------------------------------->
        <div id="MASTER_WORKCATEGORY_PANEL" class="tab-panel">
            <h2 class="page-title">作業カテゴリ</h2>

            <!-- 登録フォーム -->
            <div class="task-category-form like-card-white">
                <h3 class="page-title">カテゴリ登録</h3>
                <div class="form-row" style="width: 30%;">
                    <label>カテゴリ名</label>
                    <input type="text" placeholder="カテゴリ名を入力" id="workCategpryNameBox">
                    <button class="mini-btn" id="insWorkCategoryButton">登録</button>
                </div>
                <!-- <div class="form-row" style="width: 50%;">
                    <label>説明</label>
                    <input type="text" placeholder="説明を入力">
                    <button class="mini-btn">登録</button>
                </div> -->
            </div>

            <!-- 照会テーブル -->
            <div class="like-card-white">
                <h3 class="page-title">カテゴリ照会</h3>
                <div class="task-category-table-wrapper" id="task-category-table-wrapper">
                    <table class="task-category-table">
                        <thead>
                            <tr>
                                <th style="width:10%;">No</th>
                                <th style="width:80%;">カテゴリ名</th>
                                <th style="width:10%;">操作</th>
                            </tr>
                        </thead>
                        <tbody id="workCategory-table-tbody">
                            <!-- <tr>
                                <td>1</td>
                                <td><input type="text" value="開発"></td>
                                <td><button class="medium-button-red" style="width:100%">削除</button></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td><input type="text" value="テスト"></td>
                                <td><button class="medium-button-red" style="width:100%">削除</button></td>
                            </tr> -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- タグ管理 start --------------------------------------------------------------------------------------------------------------->
        <div id="MASTER_TAGMANAGER_PANEL" class="tab-panel">
            <h2 class="page-title">タグ管理</h2>

            <!-- 登録フォーム -->
            <div class="tag-form like-card-white">
                <h3 class="page-title">タグ登録</h3>
                <div class="form-row" style="width: 30%;">
                    <label style="width: 20px;">#</label>
                    <input type="text" placeholder="タグ名を入力" id="tagNameBox" autocomplete="off">
                    <button class="mini-btn" id="insTagButton">登録</button>
                </div>
            </div>

            <!-- 照会テーブル -->
            <div class="like-card-white">
                <h3 class="page-title">タグ一覧</h3>
                <div class="tag-table-wrapper" id="tag-table-wrapper">
                    <table class="tag-table">
                        <thead>
                            <tr>
                                <th style="width:10%;">No</th>
                                <th style="width:80%;">タグ名</th>
                                <th style="width:10%;">操作</th>
                            </tr>
                        </thead>
                        <tbody id="tag-table-tbody">
                            <!-- <tr>
                                <td>1</td>
                                <td>
                                    <input type="text" value="#開発">
                                </td>
                                <td><button class="medium-button-red" style="width:100%">削除</button></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>
                                    <input type="text" value="#テスト">
                                </td>
                                <td><button class="medium-button-red" style="width:100%">削除</button></td>
                            </tr> -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- タスク管理 start --------------------------------------------------------------------------------------------------------------->  
        <div id="WORK_TASK_PANEL" class="tab-panel">
            <h2 class="page-title">タスク管理</h2>

            <!-- 登録フォーム -->
            <div class="task-category-form like-card-white">
                <h3 class="page-title hoverStyle" style="cursor: pointer;" onclick="toggleVisible_TaskManager()">タスク登録</h3>
                <div id="register-form-taskManager">
                    <div class="form-row" style="width: 20%;">
                        <label>追加日</label>
                        <input type="date" id="added_date_taskManager">
                    </div>
                    <div class="form-row" style="width: 20%;">
                        <label>作業カテゴリ</label>
                        <select class="medium-input" id="work_category_select_taskManager">
                            <!-- <option>新規</option>
                            <option>改修</option> -->
                        </select>
                    </div>
                    <div class="form-row" style="width: 50%;">
                        <label>対象PG</label>
                        <input type="text" placeholder="PG情報" style="background-color: rgb(211, 213, 219);" id="pgInfo_input_taskManager"readonly>
                        <input type="hidden" id="pgid_hidden_taskManager"hidden>
                        <button class="mini-btn" style="margin-left: 0;" id="refButton_viewr_taskManager">ビューアーを参照</button>
                        <button class="mini-btn" style="margin-left: 0;" id="clearButton_pginfo_taskManager">クリア</button>
                    </div>
                    <div class="form-row" style="width: 50%;">
                        <label>内容</label>
                        <input type="text" placeholder="内容を入力" id="content_input_taskManager" autocomplete="off">
                    </div>
                    <div class="form-row" style="width: 24%;">
                        <label>期日</label>
                        <input type="date" id="due_date_taskManager"><button class="mini-btn" style="margin-left: 0;" id="register_button_taskManager">登録</button>
                    </div>
                </div>
            </div>

            <!-- 照会テーブル -->
            <div class="like-card-white" style="height: 40vh;" id="table-container-task-manager">
                <h3 class="page-title">タスク一覧<span id="task_kensu_label"></span></h3>
                <div class="task-category-table-wrapper" style="width: 100% !important; max-height: 85%;" id="task-Manager-table-wrapper">
                    <table class="task-category-table" style="width: 100% !important;">
                        <thead>
                            <tr>
                                <th style="width:4%;" rowspan="2" id="sample-th-taskManager">No</th>
                                <th style="width:12%;">
                                    <!-- 追加日 -->
                                    <input type="date" id="task_condition_date" class="input-date" onchange="bootSys_WORK_TASK(false)" />
                                </th>
                                <th style="width:36%;">進捗</th>
                                <th style="width:36%;">期日</th>
                                <th style="width:5%;">実績工数</th>
                                <th style="width:7%;">完了日</th>
                            </tr>
                            <tr id="second-th-row-taskManager">
                                <!-- <th style="width:4%;"></th> -->
                                <th style="width:12%;">作業カテゴリ</th>
                                <th style="width:36%;">
                                    <!-- search -->
                                    <span onclick="bootSub_refViewer(getDOM('contidionBox_pgid'), getDOM('contidionBox_pgid_hidden'), bootSys_WORK_TASK);" style="cursor: pointer; margin-right: 10px;">対象PG</span>
                                    <!-- name -->
                                    <input type="text" id="contidionBox_pgid" style="width: 65%;" placeholder="参照..." disabled />
                                    <!-- clear -->
                                    <button class="mini-btn" onclick="clearValue('contidionBox_pgid,contidionBox_pgid_hidden'); bootSys_WORK_TASK(false);" style="outline: none;">クリア</button>
                                    <!-- hidden -->
                                    <input type="hidden" id="contidionBox_pgid_hidden" />
                                </th>
                                <th style="width:36%;"><span style="margin-right: 10px;">内容</span>
                                    <input type="text" id="contidionBox_content" style="width: 65%;" placeholder="検索..." />
                                </th>
                                <th style="width:5%;">作業メモ </th>
                                <th style="width:7%;">操作</th>
                            </tr>
                        </thead>
                        <tbody id="tbody_taskTable">
                            <!-- <tr>
                                <td>1</td>
                                <td><input type="date" value="2025-09-03"></td>
                                <td>
                                    <select class="medium-input">
                                        <option>新規</option>
                                        <option>改修</option>
                                    </select>
                                </td>
                                <td>
                                    <select class="medium-input">
                                        <option>会計業務</option>
                                        <option>経費管理</option>
                                    </select>
                                </td>
                                <td>
                                    <select class="medium-input">
                                        <option>決済業務</option>
                                        <option>管理帳票</option>
                                    </select>
                                </td>
                                <td><input type="text" value="仕訳入力"></td>
                                <td><input type="text" value="PG001"></td>
                                <td><input type="text" value="サンプルタスク内容"></td>
                                <td><input type="date" value="2025-09-10"></td>
                                <td><button class="medium-button-red" style="width:100%">削除</button></td>
                            </tr> -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- PGビューアー start --------------------------------------------------------------------------------------------------------------->  
        <div id="WORK_PGVIEWER_PANEL" class="tab-panel" tabindex="0">
            <h2 class="page-title">PGビューアー</h2>
            <div class="pg-viewer-menu like-card-white" style="height: 70vh; display: flex; flex-shrink: 0;">
                <div id="pg-viewer-tree" style="height: 99%; overflow: auto; width: 35%;"></div>
                <!-- 編集ブロック -->
                <div id="pg-viewer-work" class="pg-work"></div>
                <!--  -->
            </div>
        </div>

        <!-- フローチャート start --------------------------------------------------------------------------------------------------------------->  
        <div id="WORK_FLOW_PANEL" class="tab-panel">
            <h2 class="page-title">フローチャート</h2>
            <!-- 登録フォーム -->
            <div class="task-category-form" style="width: 83vw; height: 72vh; display: flex;">
                <!-- ツリー -->
                <div id="toggle_tree_visible_flow" class="like-card-white" style="width: 0.5%; height: 95%; background-color: #94aac0; cursor: pointer;"></div>
                <div id="treeContainer_flow" class="like-card-white scroll-notVisible" style="width: 25%; height: 95%; ">
                    <select id="tree_createMode_flow">
                        <option value="PG" checked>PG</option>
                        <option value="TASK">タスク</option>
                    </select>
                    <div id="tree_flow" style="width: 99%; height: 95%; margin-top: 10px; overflow-y: auto;"></div>
                </div>
                <!-- ワーク -->
                <div class="like-card-white" id="work_container_flow" style="width: 68%; height: 95%; overflow-y: auto;">
                    <input type="text" id="title_flow" class="page-title" style="color: #61a6dfff; user-select: none; border: none; width: 100%;" value="関連項目を選択" readOnly>
                    <div id="flow_workArea" style="width: 100%; height: 87%; background-color: #e8edf1ff;">
                        <div id="file_tab_container_flow" style="width: 100%; height: 7%;"></div>
                        <div id="work_sheet_flow" style="width: 100%; height: 93%; outline: none;" tabindex="0"></div>
                    </div>
                    <input type="text" style="color: gray; border: none; user-select: none;" id="modeInput" readonly/>
                </div>
            </div>
        </div>


        <!-- 雑多メモ start --------------------------------------------------------------------------------------------------------------->  
        <div id="WORK_MEMO_PANEL" class="tab-panel">
            <h2 class="page-title">雑多メモ</h2>
            <!-- 上部：検索ボックス -->
            <div class="memo-header">
                <input type="text" class="medium-input" id="memoSearchInput" placeholder="メモ検索...">
                <button class="mini-btn" id="memoSearchButton">検索</button>
            </div>

            <div class="memo-main" style="height: 70vh;">
                <!-- 左：エクスプローラー -->
                <div class="memo-explorer" style="height: 100%;" id="exp_memo">
                    <ul class="memo-folder-list" id="tree_memo">
                        <!-- <li class="folder">日常</li>
                        <li class="folder">仕事</li>
                        <li class="folder">アイデア</li>
                        <li class="folder">買い物リスト</li> -->
                    </ul>
                </div>
                <!-- 右：メモエリア -->
                <div class="box-1 " style="height: 100%; width: 75%;">
                    <input type="text" id="fileNameBox_memo" class="box-2" placeholder="ファイル名..." style="margin: 20px; width: 22%; font-size: 16px;" autocomplete="off" spellcheck="false">
                    <label style="color: gray;" id="pathLabel_memo"></label>
                    <p>
                    <textarea id="memoTextarea_memo" class="focus-trans-back pg-memo-body" placeholder="メモを入力..." style="height:58vh; width: 95%; margin: 20px; margin-top: -10px; font-size: 16px; resize: none; border: none;" autocomplete="off" spellcheck="false" hidden></textarea>
                    <div id="memoSheet_memo" class="focus-trans-back" placeholder="メモを入力..." style="height:58vh; width: 95%; margin: 20px; margin-top: -10px; font-size: 16px; border: none; overflow-y: auto; position: relative;" >
                    </div>
                </div>
            </div>
        </div>

        <!-- ツール管理 start --------------------------------------------------------------------------------------------------------------->  
        <div id="WORK_TOOLMANAGER_PANEL" class="tab-panel">
            <h2 class="page-title">ツール管理</h2>
            <div class="memo-main" style="height: 75vh;">
                <!-- 左：エクスプローラー -->
                <div class="memo-explorer" style="height: 100%;" id="exp_tool">
                    <ul class="memo-folder-list" id="tree_tool">
                        <!-- 
                        <li class="folder">日常</li>
                        <li class="folder">仕事</li>
                        <li class="folder">アイデア</li>
                        <li class="folder">買い物リスト</li> 
                        -->
                    </ul>
                </div>
                <!-- 右：ワークエリア -->
                <div class="box-1" style="height: 100%; width: 75%;">
                    <div id="working_div_tool"></div>
                </div>
            </div>
        </div>

        <!-- チャット start --------------------------------------------------------------------------------------------------------------->  
        <div id="AI_AGENCY_PANEL" class="tab-panel">
            <h2 class="page-title">システム代行</h2>
            <div class="like-card-white agent-chat-root">
                <!-- メッセージ一覧（スクロール） -->
                <div class="agent-chat-body" id="agent-chat-body">
                    <!-- agent -->
                    <!-- <label style="color: gray; font-size: 11px;">BootSys</label>
                    <div class="chat-row agent">
                        <div class="chat-bubble">
                            こんにちは。  
                            今日は何をしますか？
                        </div>
                    </div> -->
                    <!-- user -->
                    <!-- <div class="chat-row user">
                        <div class="chat-bubble">
                            今日完了したタスクを一覧で出して
                        </div>
                    </div> -->
                    <!-- agent -->
                    <!-- <label style="color: gray; font-size: 11px;">BootSys</label>
                    <div class="chat-row agent">
                        <div class="chat-bubble">
                            本日完了したタスクは3件あります。
                            <ul>
                                <li>部署マスタ：設計</li>
                                <li>役職マスタ：テスト</li>
                                <li>人材マスタ：新規作成</li>
                            </ul>
                        </div>
                    </div> -->
                </div>
                <!-- 入力エリア -->
                <!-- <div class="agent-chat-footer">
                    <input
                        type="text"
                        id="massage-box-agency"
                        class="agent-chat-input"
                        readonly
                        placeholder="始める"
                        spellcheck="false">
                    <button class="agent-chat-send" id="massage-enter-agency">▶</button>
                </div> -->
            </div>
        </div>

        <!-- 設定 start --------------------------------------------------------------------------------------------------------------->  
        <div id="MASTER_SETTING_PANEL" class="tab-panel">
            <h2 class="page-title">設定</h2>
            <!-- ** -->
            <div class="like-card-white setting-form">
                <h3 class="page-title" style="user-select: none;">データ</h3>
                <!-- ** -->
                <table style="width: 100%; user-select: none;">
                    <thead class="form-row">
                        <th style="width: 17%;"></th>
                        <th style="width: auto;"></th>
                    </thead>
                    <tbody>
                        <tr class="form-row">
                            <td><label>JSONファイル読込</label></td>
                            <td><input type="file" id="JSONReader" accept=".json" class="mini-btn" style="min-width: 300px;"></td>
                        </tr>
                        <tr class="form-row">
                            <td><label>JSONファイルダウンロード</label></td>
                            <td><button class="mini-btn" onclick="downLoadJSON()">ダウンロード</button></td>
                        </tr>
                        <tr class="form-row">
                            <td><label for="localStorageToggle">ローカルストレージ使用</label></td>
                            <td>
                                <label class="switch">
                                    <input type="checkbox" id="localStorageToggle">
                                    <span class="slider"></span>
                                </label>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <!-- ** -->
            </div>
            <!-- * -->
        </div>
        
        <!-- コマンドパレット -->
         <!-- コマンドパレット -->
        <div class="command-palette-overlay hidden" id="commandOverlay">
            <div class="command-palette">

                <input
                type="text"
                class="command-input"
                placeholder="コマンドを入力（例: タスク登録, PGビューア）"
                autofocus
                />

                <div class="command-list">
                <div class="command-item">
                    <span class="command-title">タスク登録</span>
                    <span class="command-desc">新しいタスクを追加</span>
                </div>
                <div class="command-item">
                    <span class="command-title">PGビューアを開く</span>
                    <span class="command-desc">対象PGを表示</span>
                </div>
                <div class="command-item">
                    <span class="command-title">雑多メモを開く</span>
                    <span class="command-desc">メモ画面へ移動</span>
                </div>
                </div>

            </div>
        </div>


        

    </div>
  </div>

  <script src="script.js"></script>
  <script>
    Init();
  </script>
</body>
</html>
